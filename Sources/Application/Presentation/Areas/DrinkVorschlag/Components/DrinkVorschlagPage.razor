@using DrinkBuddy.Domain.Areas.Profile.Models
@using DrinkBuddy.Presentation.Shared.LoadingIndication
@using Microsoft.AspNetCore.Components.Forms
@using MudBlazor
@attribute [Route(Path)]

<LoadingIndicator IsLoading="IsLoading">
    <EditForm Model="@EditModel" OnValidSubmit="CreateVorschlagAsync">
        <DataAnnotationsValidator/>
        <MudPaper Class="pa-4">
            <MudCard>
                <MudCardContent>
                    <MudSelect @bind-Value="EditModel.SelectedProfil"
                               Variant="Variant.Filled"
                               FitContent="true"
                               Clearable="true">
                        @foreach (var profil in Profile!)
                        {
                            <MudSelectItem T="Profil" Value="@profil">@profil.Name</MudSelectItem>
                        }
                    </MudSelect>
                    <MudTextField @bind-Value="EditModel.Situation"
                                  Lines="5"
                                  Immediate="true"
                                  Label="Sitation"/>
                    <MudTextField @bind-Value="EditModel.SpezialWuensche"
                                  Label="Spezialwünsche"/>
                </MudCardContent>
                <MudCardActions>
                    <LoadingButton IsLoading="IsCalculating" ButtonType="ButtonType.Submit" Icon="@Icons.Material.Filled.LocalDrink" Class="mx-2"/>
                </MudCardActions>
            </MudCard>
        </MudPaper>
    </EditForm>
</LoadingIndicator>